<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" >
    <meta name="description" content="A simple note-taking application to create, manage, and organize your notes.">
    <title>Them notes</title>
    <link rel="icon" href="notes.png" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <script> 
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
    <div class="sidebar-container">
        <div class="notes-sidebar">
            <button id="toggle-sidebar">
                <img width = 20px src="menu.png" alt="Sidebar Toggle">
            </button>
            <button id="new-note" style="border: none; background-color: transparent; cursor: pointer">
                <img width= 20px src="new.png" alt="New Note">
            </button>
            <button id="new-group" style="border: none; background-color: transparent; cursor: pointer;">
                <img width="20px" src="group.png" alt="New Note" >
            </button>
            <ul id="notes-list"></ul>
            <button id="import-notes" style="border: none; background-color: transparent; cursor: pointer;">
                <img width="20px" src="import.png" alt="import" >
            </button>
            <button id="export-notes" style="border: none; background-color: transparent; cursor: pointer;">
                <img width="20px" src="export.png" alt="export" >
            </button>
            <input type="file" id="file-input" style="display:none;">
            <script>
                const exportButton = document.getElementById('export-notes');
                exportButton.addEventListener('click', function() {
                    console.log("Export button clicked");
                    exportNotes();
                });

                const importButton = document.getElementById('import-notes');
                const fileInput = document.getElementById('file-input');
                fileInput.addEventListener('change', function() {
                    console.log("File selected for import");
                    importNotes(event);
                });

                importButton.addEventListener('click', function() {
                    console.log("Import button clicked");
                    fileInput.click();  // Opens file dialog
                });
            </script>
            
            

            <button id="theme-toggle" aria-label="Toggle Dark/Light Mode">
                <img id="theme-icon" alt="Toggle Dark/Light Mode" src="sun.png"/>
            </button>
            
        </div>

       
        
    </div>
    <button id="installButton" style="display: inline;">Install App</button>
    <div id="content-area" contenteditable="true" spellcheck="false" style="direction: ltr; text-align: left;">
        Select or create a note to start writing...
    </div>
    

    <script src="script.js"></script>
    <script>
        let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  // Prevent the default install prompt
  e.preventDefault();
  // Save the event so it can be triggered later
  deferredPrompt = e;

  // Show your custom "Install" button
  const installButton = document.getElementById('installButton');
  installButton.style.display = 'block';

  installButton.addEventListener('click', () => {
    // Show the install prompt
    deferredPrompt.prompt();
    
    // Wait for the user to respond to the prompt
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('User accepted the A2HS prompt');
      } else {
        console.log('User dismissed the A2HS prompt');
      }
      deferredPrompt = null;
    });
  });
});

    </script>
</body>
</html>